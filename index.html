<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Two Column Layout</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            min-height: 100vh;
            background: #000000;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        .left-column {
            flex: 0 0 40%;
            background: #1c1c1e;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .section {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-bottom: 1px solid #2c2c2e;
        }

        .section:last-child {
            border-bottom: none;
        }

        .section-title {
            font-size: 12px;
            font-weight: 600;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            color: #8e8e93;
        }

        .dumbbell {
            position: absolute;
            bottom: 75px;
            left: 50%;
            transform: translateX(-50%);
            height: 25px;
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .dumbbell-weight {
            width: 30px;
            height: 25px;
            background: linear-gradient(to bottom, #b0b0b5, #6e6e73);
            border-radius: 3px;
            box-shadow: inset 0 1px 2px rgba(255,255,255,0.3), 
                        inset 0 -1px 2px rgba(0,0,0,0.3);
        }

        .dumbbell-bar {
            width: 80px;
            height: 8px;
            background: linear-gradient(to bottom, #8e8e93, #6e6e73);
            border-radius: 4px;
            box-shadow: inset 0 1px 1px rgba(255,255,255,0.2);
        }

        .right-column {
            flex: 1;
            background: #000000;
            display: flex;
            flex-direction: column;
            padding: 40px;
        }

        .stats-section {
            margin-bottom: 40px;
        }

        .status-effects-section {
            margin-bottom: 40px;
        }

        .status-effects-title {
            font-size: 18px;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 12px;
        }

        .effects-list {
            max-height: 150px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .effects-list::-webkit-scrollbar {
            width: 6px;
        }

        .effects-list::-webkit-scrollbar-track {
            background: #1c1c1e;
            border-radius: 3px;
        }

        .effects-list::-webkit-scrollbar-thumb {
            background: #3a3a3c;
            border-radius: 3px;
        }

        .effect-item {
            background: #1c1c1e;
            padding: 12px 14px;
            border-radius: 8px;
            border-left: 3px solid #ff9f0a;
        }

        .effect-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 4px;
        }

        .effect-name {
            font-size: 14px;
            font-weight: 600;
            color: #ffffff;
        }

        .effect-timer {
            font-size: 13px;
            font-weight: 600;
            color: #ff9f0a;
            font-variant-numeric: tabular-nums;
        }

        .effect-description {
            font-size: 12px;
            color: #8e8e93;
            line-height: 1.3;
        }

        .stat-item {
            margin-bottom: 30px;
            padding-bottom: 25px;
            border-bottom: 1px solid #2c2c2e;
        }

        .stat-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .stat-label {
            font-size: 18px;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 36px;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 8px;
        }

        .stat-hint {
            font-size: 13px;
            color: #8e8e93;
            line-height: 1.4;
        }

        .button-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }

        .lift-button {
            padding: 20px 60px;
            font-size: 24px;
            font-weight: 600;
            color: #000000;
            background: #ffffff;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(255, 255, 255, 0.2);
            transition: all 0.15s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            position: relative;
            overflow: hidden;
        }

        .add-weight-button {
            padding: 16px 50px;
            font-size: 18px;
            font-weight: 600;
            color: #000000;
            background: #ffffff;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(255, 255, 255, 0.2);
            transition: all 0.15s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .add-weight-button:disabled {
            background: #3a3a3c;
            color: #636366;
            cursor: not-allowed;
            box-shadow: none;
        }

        .add-weight-button:not(:disabled):hover {
            box-shadow: 0 6px 16px rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .add-weight-button:not(:disabled):active {
            transform: scale(0.96) translateY(0);
            background: #e5e5e7;
        }

        .lift-button:hover {
            box-shadow: 0 6px 16px rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .lift-button:active {
            transform: scale(0.96) translateY(0);
            background: #e5e5e7;
            box-shadow: 0 2px 8px rgba(255, 255, 255, 0.15);
        }

        .lift-button.lifting {
            background: #f5f5f7;
            box-shadow: 0 2px 8px rgba(255, 255, 255, 0.15),
                        inset 0 0 20px rgba(0, 0, 0, 0.05);
        }

        .lift-button.success {
            animation: successPulse 0.4s ease;
        }

        @keyframes successPulse {
            0% { 
                transform: scale(1);
                box-shadow: 0 4px 12px rgba(255, 255, 255, 0.2);
            }
            50% { 
                transform: scale(1.05);
                box-shadow: 0 6px 20px rgba(76, 217, 100, 0.4);
            }
            100% { 
                transform: scale(1);
                box-shadow: 0 4px 12px rgba(255, 255, 255, 0.2);
            }
        }

        .button-subtext {
            font-size: 14px;
            font-weight: 400;
            opacity: 0.6;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="left-column">
            <div class="section">
                <div class="section-title">Gains</div>
            </div>
            <div class="section">
                <div class="section-title">Fatigue</div>
            </div>
            <div class="section">
                <div class="section-title">Gains</div>
            </div>
            <div class="dumbbell">
                <div class="dumbbell-weight"></div>
                <div class="dumbbell-bar"></div>
                <div class="dumbbell-weight"></div>
            </div>
        </div>
        <div class="right-column">
            <div class="stats-section">
                <div class="stat-item">
                    <div class="stat-label">XP</div>
                    <div class="stat-value" id="strengthValue">0</div>
                    <div class="stat-hint">Tap and release the dumbbell over 'Gains' to gain XP.</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Weight</div>
                    <div class="stat-value" id="weightValue">50</div>
                    <div class="stat-hint">Increase your XP to lift more weight and earn rewards.</div>
                </div>
            </div>

            <div class="status-effects-section">
                <div class="status-effects-title">Status Effects</div>
                <div class="effects-list" id="effectsList">
                    <!-- Effects will be dynamically added here -->
                </div>
            </div>
            
            <div class="button-container">
                <button class="lift-button" id="liftButton">
                    <span>Lift</span>
                    <span class="button-subtext">Tap and hold</span>
                </button>
                <button class="add-weight-button" id="addWeightButton" disabled>
                    <span>Add Weight</span>
                    <span class="button-subtext">Requires 20 XP</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        const dumbbell = document.querySelector('.dumbbell');
        const liftButton = document.getElementById('liftButton');
        const addWeightButton = document.getElementById('addWeightButton');
        const strengthValue = document.getElementById('strengthValue');
        const weightValue = document.getElementById('weightValue');
        const effectsList = document.getElementById('effectsList');
        
        let isLifting = false;
        let isLowering = false;
        let startTime = null;
        let animationFrame = null;
        let currentPosition = 75; // Track current position
        let liftStartPosition = 75; // Track where lift started from
        let strength = 0;
        let weight = 50;
        let liftStartSection = null;
        let fatigueStacks = 0;
        let fatigueTimeRemaining = 0;
        let fatigueTimerInterval = null;

        function updateFatigueDisplay() {
            if (fatigueStacks === 0) {
                effectsList.innerHTML = '';
                return;
            }

            const stackText = fatigueStacks > 1 ? ` x${fatigueStacks}` : '';
            const percentage = Math.min(fatigueStacks * 10, 100);
            
            effectsList.innerHTML = `
                <div class="effect-item">
                    <div class="effect-header">
                        <div class="effect-name">Fatigue${stackText}</div>
                        <div class="effect-timer" id="fatigueTimer">${fatigueTimeRemaining}s</div>
                    </div>
                    <div class="effect-description">Reduces maximum barbell lifting height by ${percentage}%</div>
                </div>
            `;
        }

        function addFatigueStack() {
            if (fatigueStacks >= 10) return; // Max 10 stacks (100%)
            
            fatigueStacks++;
            fatigueTimeRemaining += 30;
            
            // Cap total duration at 120 seconds
            if (fatigueTimeRemaining > 120) {
                fatigueTimeRemaining = 120;
            }
            
            updateFatigueDisplay();
            
            // Start timer if not already running
            if (!fatigueTimerInterval) {
                fatigueTimerInterval = setInterval(() => {
                    if (fatigueTimeRemaining > 0) {
                        fatigueTimeRemaining--;
                        const timerEl = document.getElementById('fatigueTimer');
                        if (timerEl) {
                            timerEl.textContent = fatigueTimeRemaining + 's';
                        }
                    } else {
                        fatigueStacks = 0;
                        clearInterval(fatigueTimerInterval);
                        fatigueTimerInterval = null;
                        updateFatigueDisplay();
                    }
                }, 1000);
            }
        }

        // Calculate which section the dumbbell is in
        function getCurrentSection() {
            const leftColumn = document.querySelector('.left-column');
            const columnHeight = leftColumn.clientHeight;
            const sectionHeight = columnHeight / 3;
            
            // Calculate position from top (inverse of bottom)
            const positionFromTop = columnHeight - currentPosition;
            
            if (positionFromTop < sectionHeight) {
                return 'gains-top';
            } else if (positionFromTop < sectionHeight * 2) {
                return 'fatigue';
            } else {
                return 'gains-bottom';
            }
        }

        function isInGainsSection(section) {
            return section === 'gains-top' || section === 'gains-bottom';
        }

        function updateAddWeightButton() {
            if (strength >= 20) {
                addWeightButton.disabled = false;
            } else {
                addWeightButton.disabled = true;
            }
        }

        function animateLift(timestamp) {
            if (!isLifting) return;
            
            if (!startTime) startTime = timestamp;
            const elapsed = timestamp - startTime;
            
            // Calculate duration based on distance to travel
            const endPos = window.innerHeight - 100;
            const distanceToTravel = endPos - liftStartPosition;
            const totalDistance = endPos - 75;
            const duration = 2000 * (distanceToTravel / totalDistance); // Scale duration to remaining distance
            
            let progress = Math.min(elapsed / duration, 1);
            progress = 1 - Math.pow(1 - progress, 3); // Cubic ease-out for smooth motion
            
            // Move from lift start position to near top
            currentPosition = liftStartPosition + (endPos - liftStartPosition) * progress;
            
            dumbbell.style.bottom = `${currentPosition}px`;
            
            if (progress < 1) {
                animationFrame = requestAnimationFrame(animateLift);
            }
        }

        function animateLower(timestamp) {
            if (!isLowering) return;
            
            if (!startTime) startTime = timestamp;
            const elapsed = timestamp - startTime;
            
            // Use ease-in cubic for smooth acceleration downward
            const duration = 1500; // 1.5 seconds to return to bottom
            let progress = Math.min(elapsed / duration, 1);
            progress = Math.pow(progress, 2); // Quadratic ease-in for smooth drop
            
            // Move from current position back to 75px
            const startPos = currentPosition;
            const endPos = 75;
            currentPosition = startPos + (endPos - startPos) * progress;
            
            dumbbell.style.bottom = `${currentPosition}px`;
            
            if (progress < 1) {
                animationFrame = requestAnimationFrame(animateLower);
            } else {
                isLowering = false;
                currentPosition = 75;
            }
        }

        function startLift() {
            // Cancel any ongoing animation
            if (animationFrame) cancelAnimationFrame(animationFrame);
            
            // Check if starting in Fatigue section
            const startSection = getCurrentSection();
            if (startSection === 'fatigue') {
                addFatigueStack();
            }
            
            // Add visual feedback
            liftButton.classList.add('lifting');
            
            // Record which section we're starting in
            liftStartSection = startSection;
            
            // Start lifting from current position
            isLifting = true;
            isLowering = false;
            startTime = null;
            liftStartPosition = currentPosition; // Resume from wherever we are now
            
            animationFrame = requestAnimationFrame(animateLift);
        }

        function stopLift() {
            if (animationFrame) cancelAnimationFrame(animationFrame);
            
            // Remove lifting state
            liftButton.classList.remove('lifting');
            
            // Check if we released in Fatigue section
            const releaseSection = getCurrentSection();
            if (releaseSection === 'fatigue') {
                addFatigueStack();
            }
            
            // Check if we started and ended in different Gains sections
            if (isInGainsSection(liftStartSection) && 
                isInGainsSection(releaseSection) && 
                liftStartSection !== releaseSection) {
                strength += 5;
                strengthValue.textContent = strength;
                updateAddWeightButton();
                
                // Add success feedback
                liftButton.classList.add('success');
                setTimeout(() => {
                    liftButton.classList.remove('success');
                }, 400);
            }
            
            // Start lowering from current position
            isLifting = false;
            isLowering = true;
            startTime = null;
            
            animationFrame = requestAnimationFrame(animateLower);
        }

        // Mouse events
        liftButton.addEventListener('mousedown', startLift);
        liftButton.addEventListener('mouseup', stopLift);
        liftButton.addEventListener('mouseleave', stopLift);

        // Touch events
        liftButton.addEventListener('touchstart', (e) => {
            e.preventDefault();
            startLift();
        });
        liftButton.addEventListener('touchend', (e) => {
            e.preventDefault();
            stopLift();
        });
        liftButton.addEventListener('touchcancel', (e) => {
            e.preventDefault();
            stopLift();
        });
    </script>
</body>
</html>